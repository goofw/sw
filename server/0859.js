function(module, exports) {
    module.exports = function({streams: streams, query: query}) {
        const video = streams.find((({track: track}) => "video" === track)), audio = streams.filter((({track: track}) => "audio" === track)), subtitles = streams.filter((({track: track}) => "subtitle" === track));
        return [ "#EXTM3U", "#EXT-X-VERSION:7", ...video ? [ '#EXT-X-MEDIA:TYPE=VIDEO,GROUP-ID="video",NAME="Video",AUTOSELECT=YES,DEFAULT=YES' ] : [], ...audio.map((({id: id, title: title, language: language}) => `#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="audio",NAME="${"string" == typeof title ? title : "string" == typeof language ? language : id}"${"string" == typeof language ? `,LANGUAGE="${language}"` : ""},AUTOSELECT=YES,DEFAULT=${0 === id ? "YES" : "NO"}${video ? `,URI="audio${id}.m3u8?${query}"` : ""}`)), ...subtitles.map((({id: id, title: title, language: language}) => `#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subtitles",NAME="${"string" == typeof title ? title : "string" == typeof language ? language : id}"${"string" == typeof language ? `,LANGUAGE="${language}"` : ""},AUTOSELECT=NO,DEFAULT=NO,FORCED=NO,URI="subtitle${id}.m3u8?${query}"`)), `#EXT-X-STREAM-INF:BANDWIDTH=164000${video ? ',VIDEO="video"' : ""}${audio.length > 0 ? ',AUDIO="audio"' : ""}${subtitles.length > 0 ? ',SUBTITLES="subtitles"' : ""},NAME="Main"`, ...video ? [ `video0.m3u8?${query}` ] : audio.length > 0 ? [ `audio0.m3u8?${query}` ] : [] ].join("\n");
    };
}
